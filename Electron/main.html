<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <style>
      body {
        background-color: grey;
      }
      table, th, td {
        border: 1px solid black;
      }
      </style>
      <script type="text/javascript">
      let prompt = require('electron-prompt')
      let err = require('./Functions/err')
      let amnt;

        function handleClick(evt) {
          var node = evt.target || evt.srcElement;
          console.log(evt)
        }
        
        function addToList(item) {
          prompt({
            height: 140,
            title: 'Item Count',
            label: 'Please input a value:',
            value: '',
            inputAttrs: {
                type: 'text',
                required: true
            }
          })
          .then((r) => {
              if(r === null) {
                  console.log('user cancelled')
              } else if (r == '') {
                document.getElementById('Info').innerText = 'That item wasn\'t added to the order '
                                                            + 'because you didn\'t give a number!'
                return
              } else {
                  amnt = parseInt(r)
                  if (Number.isNaN(amnt)) {
                    console.error('Not a Number! 3:<')
                    document.getElementById('Info').innerText = 'That\'s not a number!'
                    setTimeout(2000, document.getElementById('Info').innerText = '')
                    return
                  }

                  // getting name of item
                axios.post('https://esi.evetech.net/latest/universe/names/?datasource=tranquility', [item])
                      .then(function (response) {
                        console.log(response)
                        item = response
                      })
                      .catch(function (error) {
                        console.log(error)
                      })
                  document.getElementById('Info').innerText = `Added ${amnt} ${item} to your shopping list!`
                  setTimeout(2000, document.getElementById('Info').innerHTML = '')
                  console.log(amnt)

                  console.log('result', r)
              }
          })
          .catch(console.error)
        }
        
        </script>
  </head>
  <body>
    <form>
      Region:<br>
      <input type="text" name="region" id="Region" value=""><br>
        <!--<select id = "fedList">
        <option id="caldari" value="caldari">Caldari</option>
        <option id="amarr" value="amarr">Amarr</option>
        <option id="gallente" value="gallente">Gallente</option>
        <option id="minmatar" value="minmatar">Minmatar</option>
        <option id="triglavian" value="triglavian">Triglavian</option>
      </select><br>-->
      Item:<br>
      <input type="text" name="item" id="Item" value=""><br><br>
      <input type="radio" name="bOs" id="buyOrSell" value="buy">Who's Selling?<br>
      <input type="radio" name="bOs" id="buyOrSell" value="sell">Who's Buying?<br><br>
      <input type="button" value="Fetch" id="Fetch" onclick="get()"/>
    </form>
    <p id="Info"></p>
    <table id="table" style="width:50%">
      <tr>
        <th>Station</th>
        <th>Price (ISK)</th> 
        <th>     </th>
        <th>Add to List</th>
      </tr>
</table>

    <script>

    const getItem = require('./Functions/getItem.js')

    function get() {
      getItem(document.getElementById('Item').value
                  , document.getElementById('Region').value
                  , document.getElementsByName('bOs'))
     const info = document.getElementById('Info')
     // Getting value of selected option in dropdown
    // let e = document.getElementById('fedList')
    // let strUser = e.options[e.selectedIndex].value
    }
     
  document.onkeyup = function(e) {
        if (e.which == 13) {
          get()
        }
      }
    </script>
  </body>
</html>